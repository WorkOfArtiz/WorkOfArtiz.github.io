var buildProductView=(()=>{let a=document.getElementById(`products`);let b=[];for(let a of productDetails){productAmounts[a.name]=0;b.push(`<div class="row justify-content-center align-items-center g-2 mb-1" product="${a.name}">
                <div class="col-8">${a.label}</div>
                <div class="col-4 controls">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-success" onclick="incAmount('${a.name}')">+</button>
                        <button type="button" class="btn btn-primary value">0</button>
                        <button type="button" class="btn btn-danger" onclick="decAmount('${a.name}')">-</button>
                    </div>
                </div>
        </div>`)};a.innerHTML=b.join(``)});var formatPriceFloat=(a=>b(a/100)+ `.`+ b(a/c)%c+ ``+ a%c);var estimateBills=(a=>{let c=2000,b=1000,d=5000,e=10000,f=100,g=0;if(a<=b){return b}else if(a<=c){return c}else if(a<=d){return d}else if(a<=e){return e}else if(a%f==g){return a};return ((a/f|g)+ 1)*f});var calculateChange=(()=>{let h=`is-invalid`,i=`change`,j=0,g=isNaN;let a=document.getElementById(`total-price`);let b=readPriceFloat(a.value);if(g(b)){a.classList.add(h)}else{a.classList.remove(h)};let c=document.getElementById(`money-received`);let d=readPriceFloat(c.value);if(g(d)){c.classList.add(h)}else{c.classList.remove(h)};if(g(d)||g(b)){document.getElementById(i).innerHTML=`You made a typo above`;return}else if(d<b){document.getElementById(i).innerHTML=`Customer didn't pay enough`;return}else if(d==b){document.getElementById(i).innerHTML=`Customer paid exactly the right amount`;return};let e=d- b;let f=[];for(let a of currencies){if(!a.in_stock||a.value>e){continue};times=e/a.value|j;e-=times*a.value;let b=`
        <div class="mb-3 col-${a.type===`bill`?4:2}">
            <img class="currency ${a.type}" src="${a.img}">
        </div>
        `;for(let a=j;a<times;a++){f.push(b)}};document.getElementById(i).innerHTML=`
        <div class="row">
            ${f.join(``)}
        </div>
    `});var setAmount=((a,b)=>{let c=document.querySelector(`#products > div[product='${a}'] button.btn-primary`);c.innerHTML=b;productAmounts[a]=b;for(let c of amountChangedListeners){c(a,b)}});var incAmount=(a=>{setAmount(a,productAmounts[a]+ 1)});var formatCurrency=(a=>`€ `+ formatPriceFloat(a).padStart(7));var decAmount=(a=>{if(productAmounts[a]==0){return};setAmount(a,productAmounts[a]- 1)});var readPriceFloat=(a=>{let b=`.`,d=100,c=0;if(a.match(/\d+\.\d{2}/)){let [e,f]=a.split(b);return (e- c)*d+ Math.floor(f)}else if(a.match(/\d+\.\d/)){let [e,f]=a.split(b);return (e- c)*d+ (f- c)*10}else if(a.match(/\d+/)){return (a- c)*d};return NaN});var rebuildCart=(()=>{let f=0,g=`receipt`,e=Object.entries;let a={...productAmounts};let b=[];for(let c of discounts){let d=Infinity;for(const [b,g] of e(c.consists_of)){if(a[b]<g){d=f;break}else{d=Math.min(d,a[b]/g)}};if(d<1){continue};let g=d|f;b.push({label:c.name,individual_price:c.price,amount:g,item_total:g*c.price});for(const [b,d] of e(c.consists_of)){a[b]-=g*d}};for(let c of productDetails){if(a[c.name]==f){continue};b.push({label:c.label,individual_price:c.price,amount:a[c.name],item_total:a[c.name]*c.price})};let c=[];for(let a of b){c.push(`
        <div class="row justify-content-center align-items-center g-2 mb-1" product="regular-duck">
            <div class="col-8">${a.label}</div>
            <div class="col-2 controls">x ${a.amount}</div>
            <div class="col-2 controls"><pre class="mb-0">${formatCurrency(a.item_total)}</pre></div>
        <div>
        `)};let d=b.reduce((a,b)=>a+ b.item_total,f);if(d>f){c.push(`
        <div class="row justify-content-center align-items-center g-2 mb-1" product="regular-duck">
            <div class="col-8"><strong>Total</strong></div>
            <div class="col-2 controls"></div>
            <div class="col-2 controls"><pre class="mb-0">${formatCurrency(d)}</pre></div>
        <div>
        `);document.getElementById(g).innerHTML=`
        <div class="card">
            <div class="card-header bg-dark text-light">
                Receipt
            </div>
            <div class="card-body">
                ${c.join(``)}
            </div>
        </div>
        `;document.getElementById(`total-price`).value=formatPriceFloat(d);document.getElementById(`money-received`).value=formatPriceFloat(estimateBills(d));calculateChange()}else{document.getElementById(g).innerHTML=`No items chosen yet`}});const productDetails=[{name:`regular-duck`,label:`Regular duck`,price:1300},{name:`regular-duck-box`,label:`Regular duck in box`,price:1500},{name:`tiny-duck`,label:`Small duck at counter`,price:550},{name:`small-duck`,label:`Next to small ducks (medium)`,price:750},{name:`lego-duck`,label:`Lego duck`,price:1500},{name:`sw-duck`,label:`Starwars duck`,price:1500},{name:`sb-keychain`,label:`Snowball keychain`,price:1295},{name:`b-duck`,label:`Bobbing duck (b-duck)`,price:1200},{name:`ayyg`,label:`Eggs`,price:850},{name:`bud-duck`,label:`Bud duck`,price:2500},{name:`bud-duck-small`,label:`Bud duck (small)`,price:1500},{name:`cab-can`,label:`Cabernet canard`,price:3450},{name:`duck-stopper`,label:`Duck door stopper`,price:1900},{name:`duck-bank`,label:`Piggy bank`,price:2350},{name:`tubbz`,label:`TUBBZ duck`,price:3950},{name:`star-trek-duck`,label:`Star trek duck`,price:3950},{name:`dino-duck`,label:`Dinosaur duck`,price:12900},{name:`top-notch`,label:`Top shelf duck`,price:4950},{name:`top-notch-chonk`,label:`Top shelf duck (big)`,price:7900},{name:`ceramic-smoll`,label:`Ceramic duck (small, all variants)`,price:2495},{name:`ceramic-normal`,label:`Ceramic duck (w/o silver)`,price:4950},{name:`ceramic-silver`,label:`Ceramic duck (silver)`,price:5995},{name:`ceramic-chonk`,label:`Ceramic duck (big)`,price:35000},{name:`bag-small`,label:`Small bag`,price:2450},{name:`bag-medium`,label:`Medium bag`,price:3450},{name:`bag-large`,label:`Large bag`,price:3450}];const discounts=[{name:`Discount 3 Regular ducks for €32`,consists_of:{"regular-duck":3},price:3200},{name:`Discount 3 Regular ducks in boxes for €40`,consists_of:{"regular-duck-box":3},price:4000},{name:`Discount 4 Small ducks at counter for €20`,consists_of:{"tiny-duck":4},price:2000},{name:`Discount 4 Next to small ducks (medium) for €20`,consists_of:{"small-duck":3},price:2000}];const currencies=[{name:`100 bill`,value:10000,img:`img/100-euro.png`,in_stock:!1,type:`bill`},{name:`50 bill`,value:5000,img:`img/50-euro.png`,in_stock:!1,type:`bill`},{name:`20 bill`,value:2000,img:`img/20-euro.png`,in_stock:!0,type:`bill`},{name:`10 bill`,value:1000,img:`img/10-euro.png`,in_stock:!0,type:`bill`},{name:`5 bill`,value:500,img:`img/5-euro.png`,in_stock:!0,type:`bill`},{name:`2 coin`,value:200,img:`img/2-euro.png`,in_stock:!0,type:`coin`},{name:`1 coin`,value:100,img:`img/1-euro.png`,in_stock:!0,type:`coin`},{name:`50 cents`,value:50,img:`img/50-cents.png`,in_stock:!0,type:`coin`},{name:`20 cents`,value:20,img:`img/20-cents.png`,in_stock:!0,type:`coin`},{name:`10 cents`,value:10,img:`img/10-cents.png`,in_stock:!0,type:`coin`},{name:`5 cents`,value:5,img:`img/5-cents.png`,in_stock:!0,type:`coin`}];const productAmounts={};const amountChangedListeners=[];window.onload=(()=>{buildProductView();rebuildCart();calculateChange();document.getElementById(`total-price`).onkeyup=calculateChange;document.getElementById(`money-received`).onkeyup=calculateChange;amountChangedListeners.push(rebuildCart)})